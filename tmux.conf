#------------------------------------------------------------------------------
#  DEFAULTS -------------------------------------------------------------------
#------------------------------------------------------------------------------
set -g base-index 1                              # count windows from 1
setw -g pane-base-index 1                        # count panes from 1
set-option -g allow-rename off                   # don't rename windows automatically (can rename windows with <C-b> ,)
set -sg escape-time 0                            # zeroes out tmux timer for faster ESC response in NVIM
set -g history-limit 100000                      # scrollback buffer size increase
set -g mouse on                                  # Allows scrolling and selecting in copy-mode

# set-option -g terminal-overrides 'xterm*:XT:Ms=\E]52;%p1%s;%p2%s\007:Cc=\E]12;%p1%s\007:Cr=\E]112\007:Cs=\E]50;CursorShape=%?%p1%{3}%<%t%{0}%e%p1%{2}%-%;%d\007'

#------------------------------------------------------------------------------
# KEY BINDINGS ----------------------------------------------------------------
#------------------------------------------------------------------------------
unbind C-b                                       # undo default tmux hotkey
set -g prefix C-a                                # manually set tmux hotkey
bind a send-keys C-a                             # toggle tmux windows
bind C-a last-window
bind c new-window -c '#{pane_current_path}'      # tmux new window
bind C-l send-keys C-l                           # clear pane
bind-key / copy-mode \; send-key ?               # search tmux hotkey
bind-key e copy-mode \; send-keys "?Error" C-m   # Search for previous error

# Copy/paste interop
bind C-c run "tmux show-buffer | reattach-to-user-namespace pbcopy"
bind C-v run "reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer"

# allow copy from tmux buffer
bind-key -T copy-mode M-w send-keys -X copy-pipe 'reattach-to-user-namespace pbcopy'
bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded";    # reload tmux configuration

#------------------------------------------------------------------------------
# TRUE COLOR DEFAULTS ---------------------------------------------------------
#------------------------------------------------------------------------------
# set tmux's default terminal
set -g default-terminal "xterm-256color-italic"
# override with True color
set-option -ga terminal-overrides ",xterm-256color-italic:Tc"

#------------------------------------------------------------------------------
# STATUS BAR CONFIG -----------------------------------------------------------
#------------------------------------------------------------------------------
set -g status-interval 5                         # Refresh status bar rate

set-option -g message-bg default
set-option -g message-fg yellow

set-option -g status-bg default
set-option -g status-fg colour4

set-option -g status-justify right
set-option -g status-position top

set-option -g status-left-length 80
set-option -g status-left '#[fg=default,dim][ #[fg=default,dim]#T #[fg=default,dim]]'

set-option -g status-right-length 45
set-option -g status-right '#{battery_status_fg}#{battery_percentage}#[fg=colour8] |#{cpu_fg_color}#{cpu_percentage}#[fg=colour8,dim] | #[fg=default,dim]%l:%M%p'

set-window-option -g window-status-current-format '#[fg=red,bold](( #[fg=cyan,bg=default,bright,bold]#W#[fg=red,bold] ))#[fg=default]'
set-window-option -g window-status-format '#[fg=black,bg=default](( #[fg=colour8,bg=default,dim]#W#[fg=black,dim,bg=default] ))#[fg=default]'

#------------------------------------------------------------------------------
# TPM -------------------------------------------------------------------------
#------------------------------------------------------------------------------
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'christoomey/vim-tmux-navigator'
run '~/.tmux/plugins/tpm/tpm' # Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
